<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>好店榜单</title>

    <!-- 网站公共会用到静态资源 -->
    <link rel="stylesheet" type="text/css" href="/static/common/css/base.css">
    <link rel="stylesheet" type="text/css" href="/static/common/css/common.css">
    <script type="text/javascript" src="/static/common/js/jquery/jquery-1.12.4.min.js"></script>
    
    


    <!-- 首页静态资源 -->
   
    <script type="text/javascript" src="/static/common/js/jquery-throttle-debounce/jquery.ba-throttle-debounce.js"></script>
    <script type="text/javascript" src="/static/common/js/jquery-infiniteScroll/jquery.infinitescroll.js"></script>
    <script type="text/javascript" src="/static/common/js/jquery-mCustomScrollbar/jquery.mCustomScrollbar.js"></script>
    <link rel="stylesheet" type="text/css" href="/static/common/js/jquery-mCustomScrollbar/jquery.mCustomScrollbar.css">
     <link rel="stylesheet" type="text/css" href="/static/haodian/css/haodianbangdan.css">
</head>

<body>
    @@include("../static/common/views/_header.html")
    <div class="coms-container mt20 clearfix relative">
        <div class="gsrank-aside-wrapper" id="J_gsrank-aside-wrapper">
            <div class="gsrank-aside-box">
                <p class="caption">好店分类</p>
                <div class="list" id="J_mContent_scroller">
                    <ul>
                        <li class="current"><a href="#">烧烤<i></i></a></li>
                        <li><a href="#">火锅<i></i></a></li>
                        <li><a href="#">西餐<i></i></a></li>
                        <li><a href="#">日料<i></i></a></li>
                        <li><a href="#">小吃<i></i></a></li>
                        <li><a href="#">自助餐<i></i></a></li>
                        <li><a href="#">闽菜<i></i></a></li>
                        <li><a href="#">韩国料理<i></i></a></li>
                        <li><a href="#">川菜<i></i></a></li>
                        <li><a href="#">东南亚菜<i></i></a></li>
                        <li><a href="#">家常菜<i></i></a></li>
                        <li><a href="#">私房菜<i></i></a></li>
                        <li><a href="#">粤菜<i></i></a></li>
                        <li><a href="#">海鲜<i></i></a></li>
                        <li><a href="#">东北菜<i></i></a></li>
                        <li><a href="#">测试测试测试测试01<i></i></a></li>
                        <li><a href="#">测试测试测试测试02<i></i></a></li>
                        <li><a href="#">测试测试测试测试03<i></i></a></li>
                        <li><a href="#">测试测试测试测试04<i></i></a></li>
                        <li><a href="#">测试测试测试测试05<i></i></a></li>
                        <li><a href="#">测试测试测试测试06<i></i></a></li>
                        <li><a href="#">测试测试测试测试07<i></i></a></li>
                        <li><a href="#">测试测试测试测试08<i></i></a></li>
                    </ul>
                </div>
            </div>
        </div>
        <div class="gsrank-main">
            <div class="soma-hd clearfix">
                <p class="tit">厦门-烧烤</p>
                <span class="rank">Top50</span>
                <span class="time">数据更新截止：17/12/14</span>
            </div>
            <div class="rank-list-tit-seat">
                <ul class="rank-list rank-list-tit">
                    <li class="cols cols-1">排名</li>
                    <li class="cols cols-2">商家</li>
                    <li class="cols cols-3">口味</li>
                    <li class="cols cols-4">服务</li>
                    <li class="cols cols-5">环境</li>
                    <li class="cols cols-6">五星好评率</li>
                    <li class="cols cols-7">差评率</li>
                    <li class="cols cols-8">好店指数</li>
                </ul>
            </div>
            <ul class="rank-list rank-list-info" id="J_rank-list-info">
                <!-- <li class="clearfix">
                    <div class="cols cols-1"><span class="num first">1</span></div>
                    <div class="cols cols-2">
                        <p class="name">小王烧烤</p>
                    </div>
                    <div class="cols cols-3">9.0</div>
                    <div class="cols cols-4">8.8</div>
                    <div class="cols cols-5">8.8</div>
                    <div class="cols cols-6">98%</div>
                    <div class="cols cols-7">0.2%</div>
                    <div class="cols cols-8"><span class="zs">895</span></div>
                </li>
                <li class="clearfix">
                    <div class="cols cols-1"><span class="num second">2</span></div>
                    <div class="cols cols-2">小王烧烤</div>
                    <div class="cols cols-3">9.0</div>
                    <div class="cols cols-4">8.8</div>
                    <div class="cols cols-5">8.8</div>
                    <div class="cols cols-6">98%</div>
                    <div class="cols cols-7">0.2%</div>
                    <div class="cols cols-8"><span class="zs">895</span></div>
                </li>
                <li class="clearfix">
                    <div class="cols cols-1"><span class="num third">3</span></div>
                    <div class="cols cols-2">小王烧烤</div>
                    <div class="cols cols-3">9.0</div>
                    <div class="cols cols-4">8.8</div>
                    <div class="cols cols-5">8.8</div>
                    <div class="cols cols-6">98%</div>
                    <div class="cols cols-7">0.2%</div>
                    <div class="cols cols-8"><span class="zs">895</span></div>
                </li>
                <li class="clearfix">
                    <div class="cols cols-1"><span class="num">4</span></div>
                    <div class="cols cols-2">小王烧烤</div>
                    <div class="cols cols-3">9.0</div>
                    <div class="cols cols-4">8.8</div>
                    <div class="cols cols-5">8.8</div>
                    <div class="cols cols-6">98%</div>
                    <div class="cols cols-7">0.2%</div>
                    <div class="cols cols-8"><span class="zs">895</span></div>
                </li>
                <li class="clearfix">
                    <div class="cols cols-1"><span class="num">5</span></div>
                    <div class="cols cols-2">小王烧烤</div>
                    <div class="cols cols-3">9.0</div>
                    <div class="cols cols-4">8.8</div>
                    <div class="cols cols-5">8.8</div>
                    <div class="cols cols-6">98%</div>
                    <div class="cols cols-7">0.2%</div>
                    <div class="cols cols-8"><span class="zs">895</span></div>
                </li>
                <li class="clearfix">
                    <div class="cols cols-1"><span class="num">6</span></div>
                    <div class="cols cols-2">小王烧烤</div>
                    <div class="cols cols-3">9.0</div>
                    <div class="cols cols-4">8.8</div>
                    <div class="cols cols-5">8.8</div>
                    <div class="cols cols-6">98%</div>
                    <div class="cols cols-7">0.2%</div>
                    <div class="cols cols-8"><span class="zs">895</span></div>
                </li>
                <li class="clearfix">
                    <div class="cols cols-1"><span class="num">7</span></div>
                    <div class="cols cols-2">小王烧烤</div>
                    <div class="cols cols-3">9.0</div>
                    <div class="cols cols-4">8.8</div>
                    <div class="cols cols-5">8.8</div>
                    <div class="cols cols-6">98%</div>
                    <div class="cols cols-7">0.2%</div>
                    <div class="cols cols-8"><span class="zs">895</span></div>
                </li>
                <li class="clearfix">
                    <div class="cols cols-1"><span class="num">8</span></div>
                    <div class="cols cols-2">小王烧烤</div>
                    <div class="cols cols-3">9.0</div>
                    <div class="cols cols-4">8.8</div>
                    <div class="cols cols-5">8.8</div>
                    <div class="cols cols-6">98%</div>
                    <div class="cols cols-7">0.2%</div>
                    <div class="cols cols-8"><span class="zs">895</span></div>
                </li>
                <li class="clearfix">
                    <div class="cols cols-1"><span class="num">9</span></div>
                    <div class="cols cols-2">小王烧烤</div>
                    <div class="cols cols-3">9.0</div>
                    <div class="cols cols-4">8.8</div>
                    <div class="cols cols-5">8.8</div>
                    <div class="cols cols-6">98%</div>
                    <div class="cols cols-7">0.2%</div>
                    <div class="cols cols-8"><span class="zs">895</span></div>
                </li>
                <li class="clearfix">
                    <div class="cols cols-1"><span class="num">10</span></div>
                    <div class="cols cols-2">小王烧烤</div>
                    <div class="cols cols-3">9.0</div>
                    <div class="cols cols-4">8.8</div>
                    <div class="cols cols-5">8.8</div>
                    <div class="cols cols-6">98%</div>
                    <div class="cols cols-7">0.2%</div>
                    <div class="cols cols-8"><span class="zs">895</span></div>
                </li>
                <li class="clearfix">
                    <div class="cols cols-1"><span class="num">11</span></div>
                    <div class="cols cols-2">小王烧烤</div>
                    <div class="cols cols-3">9.0</div>
                    <div class="cols cols-4">8.8</div>
                    <div class="cols cols-5">8.8</div>
                    <div class="cols cols-6">98%</div>
                    <div class="cols cols-7">0.2%</div>
                    <div class="cols cols-8"><span class="zs">895</span></div>
                </li>
                <li class="clearfix">
                    <div class="cols cols-1"><span class="num">12</span></div>
                    <div class="cols cols-2">小王烧烤</div>
                    <div class="cols cols-3">9.0</div>
                    <div class="cols cols-4">8.8</div>
                    <div class="cols cols-5">8.8</div>
                    <div class="cols cols-6">98%</div>
                    <div class="cols cols-7">0.2%</div>
                    <div class="cols cols-8"><span class="zs">895</span></div>
                </li>
                <li class="clearfix">
                    <div class="cols cols-1"><span class="num">13</span></div>
                    <div class="cols cols-2">小王烧烤</div>
                    <div class="cols cols-3">9.0</div>
                    <div class="cols cols-4">8.8</div>
                    <div class="cols cols-5">8.8</div>
                    <div class="cols cols-6">98%</div>
                    <div class="cols cols-7">0.2%</div>
                    <div class="cols cols-8"><span class="zs">895</span></div>
                </li>
                <li class="clearfix">
                    <div class="cols cols-1"><span class="num">14</span></div>
                    <div class="cols cols-2">小王烧烤</div>
                    <div class="cols cols-3">9.0</div>
                    <div class="cols cols-4">8.8</div>
                    <div class="cols cols-5">8.8</div>
                    <div class="cols cols-6">98%</div>
                    <div class="cols cols-7">0.2%</div>
                    <div class="cols cols-8"><span class="zs">895</span></div>
                </li>
                <li class="clearfix">
                    <div class="cols cols-1"><span class="num">15</span></div>
                    <div class="cols cols-2">小王烧烤</div>
                    <div class="cols cols-3">9.0</div>
                    <div class="cols cols-4">8.8</div>
                    <div class="cols cols-5">8.8</div>
                    <div class="cols cols-6">98%</div>
                    <div class="cols cols-7">0.2%</div>
                    <div class="cols cols-8"><span class="zs">895</span></div>
                </li>
                <li class="clearfix">
                    <div class="cols cols-1"><span class="num">16</span></div>
                    <div class="cols cols-2">小王烧烤</div>
                    <div class="cols cols-3">9.0</div>
                    <div class="cols cols-4">8.8</div>
                    <div class="cols cols-5">8.8</div>
                    <div class="cols cols-6">98%</div>
                    <div class="cols cols-7">0.2%</div>
                    <div class="cols cols-8"><span class="zs">895</span></div>
                </li>
                <li class="clearfix">
                    <div class="cols cols-1"><span class="num">17</span></div>
                    <div class="cols cols-2">小王烧烤</div>
                    <div class="cols cols-3">9.0</div>
                    <div class="cols cols-4">8.8</div>
                    <div class="cols cols-5">8.8</div>
                    <div class="cols cols-6">98%</div>
                    <div class="cols cols-7">0.2%</div>
                    <div class="cols cols-8"><span class="zs">895</span></div>
                </li>
                <li class="clearfix">
                    <div class="cols cols-1"><span class="num">18</span></div>
                    <div class="cols cols-2">小王烧烤</div>
                    <div class="cols cols-3">9.0</div>
                    <div class="cols cols-4">8.8</div>
                    <div class="cols cols-5">8.8</div>
                    <div class="cols cols-6">98%</div>
                    <div class="cols cols-7">0.2%</div>
                    <div class="cols cols-8"><span class="zs">895</span></div>
                </li>
                <li class="clearfix">
                    <div class="cols cols-1"><span class="num">19</span></div>
                    <div class="cols cols-2">小王烧烤</div>
                    <div class="cols cols-3">9.0</div>
                    <div class="cols cols-4">8.8</div>
                    <div class="cols cols-5">8.8</div>
                    <div class="cols cols-6">98%</div>
                    <div class="cols cols-7">0.2%</div>
                    <div class="cols cols-8"><span class="zs">895</span></div>
                </li>
                <li class="clearfix">
                    <div class="cols cols-1"><span class="num">20</span></div>
                    <div class="cols cols-2">小王烧烤</div>
                    <div class="cols cols-3">9.0</div>
                    <div class="cols cols-4">8.8</div>
                    <div class="cols cols-5">8.8</div>
                    <div class="cols cols-6">98%</div>
                    <div class="cols cols-7">0.2%</div>
                    <div class="cols cols-8"><span class="zs">895</span></div>
                </li> -->
            </ul>
            <div class="rank-list-status" id="J_rank-list-status">
                <div class="infinite-scroll-request">
                    <p class="coms-load-more">
                        <i class="pic"></i>
                    </p>
                </div>
                <p class="infinite-scroll-last">òᆺó被你看光啦！</p>
                <p class="infinite-scroll-error">o(╥﹏╥)o加载出错啦！</p>
            </div>
        </div>
    </div>

    @@include("../static/common/views/_footer.html")
    <script type="text/javascript">
    (function($) {
        $(function() {
            var $aside = $("#J_gsrank-aside-wrapper"),
                $mScrollElem=$("#J_mContent_scroller"),
            	$asideScroll=$aside.find(".gsrank-aside-box"),
            	offsetTop = $aside.offset().top,
            	asideSH=$asideScroll.height(),
            	randDistance=20;
            	$win = $(window);
            var winH,remainH;

            function mCustomScrollInstance(){
            	$mScrollElem.mCustomScrollbar({
					theme:"minimal-dark",
                    mouseWheel:{ preventDefault:true },
					scrollInertia:400
				});
            }

            function setH(){
            	if(remainH < asideSH){
            		$aside.css("height",remainH);
                     $mScrollElem.css("height",remainH-39);
            		mCustomScrollInstance();
            	}
            }
          
            $win.on("scroll", $.throttle(250, function() {
                var scrollTop = $(window).scrollTop();
                if (scrollTop > offsetTop) {
                	remainH=winH-randDistance-60;
                    $aside.addClass('fixed');
                } else {
                	remainH=winH-offsetTop-randDistance;
                    $aside.removeClass('fixed')
                }
                setH();

            }));
            /**
             *   判断 屏幕高度 > 滚动内容高度    那么设置高度，然后实例化插件                   
             */
            $win.on("resize",$.throttle(250, function() {
            	winH=$win.height();
            	remainH=winH-offsetTop-randDistance;
            	setH();
            })).trigger('resize');


        });
    })(jQuery);

     (function($) {
        $(function() {
            var $seat = $(".rank-list-tit"),
                $win = $(window),
                offsetTop = $seat.offset().top;
            $win.on("scroll", $.throttle(100, function() {
                var scrollTop = $win.scrollTop();
                 if (scrollTop > offsetTop) {
                    $seat.addClass('fixed');
                } else {
                    $seat.removeClass('fixed');
                }
            }));
        })
    })(jQuery);

    //加载更多
    (function($) {
        $(function() {
            var $maxPage = 4;

            var $loadStatus = $("#J_rank-list-status"),
                $loadStatusLast = $loadStatus.find(".infinite-scroll-last")
            	$rankList = $("#J_rank-list-info");

            var infScroll;

            $rankList.infiniteScroll({
                path: function() {
                    if (this.loadCount < 4) {
                        var pageNumber = (this.loadCount + 1);
                        return 'http://wnworld.com/api/page.php?page=' + pageNumber;
                    }
                },
                append: false,
                responseType: 'json',
                history: false,
                status: '#J_rank-list-status'
            });
            $rankList.on('load.infiniteScroll', onInfiniteScrollLoad);
            $rankList.infiniteScroll('loadNextPage');
            infScroll = $rankList.data('infiniteScroll');

            function onInfiniteScrollLoad(event, response) {
                var str = "";
                for (var i = 0; i < response.length; i++) {
                    str += '<li class="clearfix">'
                    str += '<div class="cols cols-1"><span class="num">' + response[i]["rank"] + '</span></div>'
                    str += '<div class="cols cols-2">' + response[i]["name"] + '</div>'
                    str += '<div class="cols cols-3">' + response[i]["taste"] + '</div>'
                    str += '<div class="cols cols-4">' + response[i]["service"] + '</div>'
                    str += '<div class="cols cols-5">' + response[i]["environment"] + '</div>'
                    str += '<div class="cols cols-6">' + response[i]["goodcomment"] + '</div>'
                    str += '<div class="cols cols-7">' + response[i]["badcomment"] + '</div>'
                    str += '<div class="cols cols-8"><span class="zs">' + response[i]["heat"] + '</span></div>'
                    str += '</li>';
                }
                $rankList.infiniteScroll('appendItems', $(str));
                if (infScroll.loadCount >= $maxPage) {

                    $rankList.infiniteScroll('option', {
                        loadOnScroll: false
                    });
                    $loadStatus.show();
                    $loadStatusLast.fadeIn();
                    setTimeout(function() {
                    	$loadStatusLast.fadeOut();
                        $loadStatus.fadeOut();
                    }, 2500)
                }
            }


        })
    })(jQuery)
    </script>
</body>

</html>